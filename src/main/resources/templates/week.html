<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>
<main layout:fragment="content">
    <div class="cal-header">
        <a th:href="${prevUrl}" class="nav-arrow" aria-label="Previous week">&larr;</a>
        <h2 th:text="${title}"></h2>
        <a th:href="${nextUrl}" class="nav-arrow" aria-label="Next week">&rarr;</a>
    </div>

    <div class="week-grid">
        <div class="week-header">
            <div class="hour-label"></div>
            <div th:each="date : ${dates}"
                 th:classappend="${date.equals(today)} ? 'today-col'"
                 class="week-day-header">
                <span class="day-name" th:text="${#temporals.format(date, 'EEE')}"></span>
                <span th:classappend="${date.equals(today)} ? 'today-num'"
                      class="day-num"
                      th:text="${date.dayOfMonth}"></span>
            </div>
        </div>

        <div class="week-body">
            <div th:each="hour : ${hours}" class="week-row">
                <div class="hour-label" th:text="${hour.label()}"></div>
                <div th:each="date : ${dates}"
                     th:classappend="${date.equals(today)} ? 'today-col'"
                     class="time-slot">
                    <div th:if="${date.equals(today) and hour.hour() == currentHour}"
                         class="current-hour"></div>
                    <th:block th:if="${eventsByDate != null and eventsByDate.containsKey(date)}">
                        <div th:each="event : ${eventsByDate.get(date)}"
                             th:if="${event.startTime != null and event.startTime.hour == hour.hour()}"
                             class="event-block"
                             th:style="'background:' + ${event.color}"
                             th:title="${event.title + ' ' + event.timeRange}">
                            <span class="event-block-title" th:text="${event.title}"></span>
                            <span class="event-block-time" th:text="${event.timeRange}"></span>
                        </div>
                    </th:block>
                </div>
            </div>
        </div>
    </div>
</main>
</body>
</html>
